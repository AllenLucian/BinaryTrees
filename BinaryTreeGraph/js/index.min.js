Ext.define("MJ.Demo",{statics:{randomMaxCount:20,randomMaxValue:100,avlTree:new MJ.AVLTree(),bstTree:new MJ.BinarySearchTree(),btTree:new MJ.BinaryTree(),POSTORDER:"3",INORDER:"2",PREORDER:"1",LEVEL_ORDER:"0",SHOW_AVL:"2",SHOW_BST:"1",SHOW_BT:"0",$avlCtl:$("#avl"),$bstCtl:$("#bst"),$btCtl:$("#bt")}});$(function(){initCommon();initBt();initBst(MJ.Demo.$bstCtl,MJ.Demo.bstTree);initBst(MJ.Demo.$avlCtl,MJ.Demo.avlTree);$("#modules").remove()});function display(){var b=showingTreeCtl();var a=MJ.BinaryTree.GraphLayout.LINK_TYPE_ELBOW;if(b.find(".link-type .line").is(":checked")){a=MJ.BinaryTree.GraphLayout.LINK_TYPE_LINE}var d=b.find(".paper, .joint-paper");d.show();var c=new MJ.BinaryTree.GraphLayout({tree:showingTree(),linkType:a,$paper:d}).display();b.find(".node-count").text(c.tree.size);b.find(".orders select").change()}function initCommon(){$("#common").find(".type select").change(function(){MJ.Demo.$avlCtl.hide();MJ.Demo.$bstCtl.hide();MJ.Demo.$btCtl.hide();showingTreeCtl().show()})}function initBt(){var a=MJ.Demo.$btCtl;a.find(".add").click(function(){MJ.Demo.btTree.add(a.find(".node").val().trim(),a.find(".left").val().trim(),a.find(".right").val().trim());display()});a.find(".remove").click(function(){MJ.Demo.btTree.remove(a.find(".node").val());display()});a.find(".clear").click(function(){MJ.Demo.btTree.clear();display()});a.append(clonePaper());var b=a.find(".content");b.prepend("<hr>").prepend(cloneLinkType(a.attr("id")));b.append("<hr>").append(cloneOrders());MJ.Demo.btTree.add("Life","Animal","Person");MJ.Demo.btTree.add("Person","Man","Woman");MJ.Demo.btTree.add("Animal","Cat","Dog");MJ.Demo.btTree.add("Dog","Teddy","SingleDog");display()}function initBst(c,a){c.append(clonePaper());var b=c.find(".content");b.append(cloneLinkType(c.attr("id"))).append("<hr>");b.append(cloneBstInput(a));b.append("<hr>").append(cloneOrders())}function showingTreeCtl(){var a=$("#common").find(".type select").val();if(a===MJ.Demo.SHOW_BT){return MJ.Demo.$btCtl}else{if(a===MJ.Demo.SHOW_BST){return MJ.Demo.$bstCtl}else{if(a===MJ.Demo.SHOW_AVL){return MJ.Demo.$avlCtl}}}}function showingTree(){var a=$("#common").find(".type select").val();if(a===MJ.Demo.SHOW_BT){return MJ.Demo.btTree}else{if(a===MJ.Demo.SHOW_BST){return MJ.Demo.bstTree}else{if(a===MJ.Demo.SHOW_AVL){return MJ.Demo.avlTree}}}}function cloneOrders(){var a=clone(".orders");a.find("select").change(function(){var e=$(this);var d=null;var c=e.val();var b=showingTree();if(c===MJ.Demo.LEVEL_ORDER){d=b.levelOrderElements()}else{if(c===MJ.Demo.PREORDER){d=b.preorderElements()}else{if(c===MJ.Demo.INORDER){d=b.inorderElements()}else{if(c===MJ.Demo.POSTORDER){d=b.postorderElements()}}}}e.parents(".orders").find(".show-order").text(d?d.join(", "):"")});return a}function clonePaper(){return clone(".paper").css("left","390px").css("top","15px")}function cloneLinkType(g){var f=clone(".link-type");var c=g+"-link-type";var b=f.find(".elbow");var d=g+"-elbow";b.parents("label").attr("for",d);b.attr("id",d);b.attr("name",c);b.click(display);var e=f.find(".line");var a=g+"-line";e.parents("label").attr("for",a);e.attr("id",a);e.attr("name",c);e.click(display);return f}function cloneBstInput(a){var b=clone(".bst-input");var c=b.find(".data");b.find(".random").click(function(){var f=b.find(".max-count").val();if(Ext.isNumeric(f)){f=parseInt(f)}else{f=MJ.Demo.randomMaxCount}var g=b.find(".max-value").val();if(Ext.isNumeric(g)){g=parseInt(g)}else{g=MJ.Demo.randomMaxValue}f=1+Math.floor(Math.random()*f);var h=[];for(var e=0;e<f;e++){var d=null;while(d===null||$.inArray(d,h)!==-1){d=1+Math.floor(Math.random()*g)}h.push(d)}c.val(h.join(", "))});b.find(".add").click(function(){var d=c.val().split(/\D+/i);for(var e in d){a.add(parseInt(d[e].trim()))}display()});b.find(".remove").click(function(){var d=c.val().split(/\D+/i);for(var e in d){a.remove(parseInt(d[e].trim()))}display()});b.find(".clear").click(function(){a.clear();display()});return b}function clone(a){return $("#modules").find(a).clone(true)};